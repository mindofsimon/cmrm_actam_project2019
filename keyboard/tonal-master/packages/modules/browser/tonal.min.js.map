{"version":3,"file":"tonal.min.js","sources":["../../tonal/dist/index.esnext.js","../../abc-notation/dist/index.esnext.js","../../array/dist/index.esnext.js","../../pcset/dist/index.esnext.js","../../chord-dictionary/dist/index.esnext.js","../../scale-dictionary/dist/index.esnext.js","../../chord/dist/index.esnext.js","../../interval/dist/index.esnext.js","../../midi/dist/index.esnext.js","../../note/dist/index.esnext.js","../../roman-numeral/dist/index.esnext.js","../../key/dist/index.esnext.js","../../mode/dist/index.esnext.js","../../progression/dist/index.esnext.js","../../range/dist/index.esnext.js","../../scale/dist/index.esnext.js","../dist/index.es5.js"],"sourcesContent":["function isNamed(src) {\r\n    return typeof src === \"object\" && typeof src.name === \"string\";\r\n}\n\nfunction isPitch(pitch) {\r\n    return (typeof pitch === \"object\" &&\r\n        typeof pitch.step === \"number\" &&\r\n        typeof pitch.alt === \"number\");\r\n}\r\n// The nuuber of fifths of [C, D, E, F, G, A, B]\r\nconst FIFTHS = [0, 2, 4, -1, 1, 3, 5];\r\n// The number of octaves it span each step\r\nconst STEPS_TO_OCTS = FIFTHS.map((fifths) => Math.floor((fifths * 7) / 12));\r\nfunction encode(pitch) {\r\n    const { step, alt, oct, dir = 1 } = pitch;\r\n    const f = FIFTHS[step] + 7 * alt;\r\n    if (oct === undefined) {\r\n        return [dir * f];\r\n    }\r\n    const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\r\n    return [dir * f, dir * o];\r\n}\r\n// We need to get the steps from fifths\r\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\r\n// We add 1 to fifths to avoid negative numbers, so:\r\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\r\nconst FIFTHS_TO_STEPS = [3, 0, 4, 1, 5, 2, 6];\r\nfunction decode(coord) {\r\n    const [f, o, dir] = coord;\r\n    const step = FIFTHS_TO_STEPS[unaltered(f)];\r\n    const alt = Math.floor((f + 1) / 7);\r\n    if (o === undefined) {\r\n        return { step, alt, dir };\r\n    }\r\n    const oct = o + 4 * alt + STEPS_TO_OCTS[step];\r\n    return { step, alt, oct, dir };\r\n}\r\n// Return the number of fifths as if it were unaltered\r\nfunction unaltered(f) {\r\n    const i = (f + 1) % 7;\r\n    return i < 0 ? 7 + i : i;\r\n}\n\nconst NoNote = { empty: true, name: \"\", pc: \"\", acc: \"\" };\r\nconst cache = {};\r\nconst fillStr = (s, n) => Array(n + 1).join(s);\r\nconst stepToLetter = (step) => \"CDEFGAB\".charAt(step);\r\nconst altToAcc = (alt) => alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\r\nconst accToAlt = (acc) => acc[0] === \"b\" ? -acc.length : acc.length;\r\n/**\r\n * Given a note literal (a note name or a note object), returns the Note object\r\n * @example\r\n * note('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\r\n */\r\nfunction note(src) {\r\n    return typeof src === \"string\"\r\n        ? cache[src] || (cache[src] = parse(src))\r\n        : isPitch(src)\r\n            ? note(pitchName(src))\r\n            : isNamed(src)\r\n                ? note(src.name)\r\n                : NoNote;\r\n}\r\nconst REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\n/**\r\n * @private\r\n */\r\nfunction tokenize(str) {\r\n    const m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction coordToNote(noteCoord) {\r\n    return note(decode(noteCoord));\r\n}\r\nconst SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nfunction parse(noteName) {\r\n    const tokens = tokenize(noteName);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\") {\r\n        return NoNote;\r\n    }\r\n    const letter = tokens[0];\r\n    const acc = tokens[1];\r\n    const octStr = tokens[2];\r\n    const step = (letter.charCodeAt(0) + 3) % 7;\r\n    const alt = accToAlt(acc);\r\n    const oct = octStr.length ? +octStr : undefined;\r\n    const coord = encode({ step, alt, oct });\r\n    const name = letter + acc + octStr;\r\n    const pc = letter + acc;\r\n    const chroma = (SEMI[step] + alt + 120) % 12;\r\n    const o = oct === undefined ? -100 : oct;\r\n    const height = SEMI[step] + alt + 12 * (o + 1);\r\n    const midi = height >= 0 && height <= 127 ? height : null;\r\n    const freq = oct === undefined ? null : Math.pow(2, (height - 69) / 12) * 440;\r\n    return {\r\n        empty: false,\r\n        acc,\r\n        alt,\r\n        chroma,\r\n        coord,\r\n        freq,\r\n        height,\r\n        letter,\r\n        midi,\r\n        name,\r\n        oct,\r\n        pc,\r\n        step\r\n    };\r\n}\r\nfunction pitchName(props) {\r\n    const { step, alt, oct } = props;\r\n    const letter = stepToLetter(step);\r\n    if (!letter) {\r\n        return \"\";\r\n    }\r\n    const pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n}\n\nconst NoInterval = { empty: true, name: \"\", acc: \"\" };\r\n// shorthand tonal notation (with quality after number)\r\nconst INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\n// standard shorthand notation (with quality before number)\r\nconst INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nconst REGEX$1 = new RegExp(\"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\");\r\n/**\r\n * @private\r\n */\r\nfunction tokenize$1(str) {\r\n    const m = REGEX$1.exec(`${str}`);\r\n    if (m === null) {\r\n        return [\"\", \"\"];\r\n    }\r\n    return m[1] ? [m[1], m[2]] : [m[4], m[3]];\r\n}\r\nconst cache$1 = {};\r\n/**\r\n * Get interval properties. It returns an object with:\r\n *\r\n * - name: the interval name\r\n * - num: the interval number\r\n * - type: 'perfectable' or 'majorable'\r\n * - q: the interval quality (d, m, M, A)\r\n * - dir: interval direction (1 ascending, -1 descending)\r\n * - simple: the simplified number\r\n * - semitones: the size in semitones\r\n * - chroma: the interval chroma\r\n *\r\n * @param {string} interval - the interval name\r\n * @return {Object} the interval properties\r\n *\r\n * @example\r\n * import { interval } from '@tonaljs/tonal'\r\n * interval('P5').semitones // => 7\r\n * interval('m3').type // => 'majorable'\r\n */\r\nfunction interval(src) {\r\n    return typeof src === \"string\"\r\n        ? cache$1[src] || (cache$1[src] = parse$1(src))\r\n        : isPitch(src)\r\n            ? interval(pitchName$1(src))\r\n            : isNamed(src)\r\n                ? interval(src.name)\r\n                : NoInterval;\r\n}\r\nconst SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nconst TYPES = \"PMMPPMM\";\r\nfunction parse$1(str) {\r\n    const tokens = tokenize$1(str);\r\n    if (tokens[0] === \"\") {\r\n        return NoInterval;\r\n    }\r\n    const num = +tokens[0];\r\n    const q = tokens[1];\r\n    const step = (Math.abs(num) - 1) % 7;\r\n    const t = TYPES[step];\r\n    if (t === \"M\" && q === \"P\") {\r\n        return NoInterval;\r\n    }\r\n    const type = t === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = \"\" + num + q;\r\n    const dir = num < 0 ? -1 : 1;\r\n    const simple = num === 8 || num === -8 ? num : dir * (step + 1);\r\n    const alt = qToAlt(type, q);\r\n    const oct = Math.floor((Math.abs(num) - 1) / 7);\r\n    const semitones = dir * (SIZES[step] + alt + 12 * oct);\r\n    const chroma = (((dir * (SIZES[step] + alt)) % 12) + 12) % 12;\r\n    const coord = encode({ step, alt, oct, dir });\r\n    return {\r\n        empty: false,\r\n        name,\r\n        num,\r\n        q,\r\n        step,\r\n        alt,\r\n        dir,\r\n        type,\r\n        simple,\r\n        semitones,\r\n        chroma,\r\n        coord,\r\n        oct\r\n    };\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction coordToInterval(coord) {\r\n    const [f, o = 0] = coord;\r\n    const isDescending = f * 7 + o * 12 < 0;\r\n    const ivl = isDescending ? [-f, -o, -1] : [f, o, 1];\r\n    return interval(decode(ivl));\r\n}\r\nfunction qToAlt(type, q) {\r\n    return (q === \"M\" && type === \"majorable\") ||\r\n        (q === \"P\" && type === \"perfectable\")\r\n        ? 0\r\n        : q === \"m\" && type === \"majorable\"\r\n            ? -1\r\n            : /^A+$/.test(q)\r\n                ? q.length\r\n                : /^d+$/.test(q)\r\n                    ? -1 * (type === \"perfectable\" ? q.length : q.length + 1)\r\n                    : 0;\r\n}\r\n// return the interval name of a pitch\r\nfunction pitchName$1(props) {\r\n    const { step, alt, oct = 0, dir } = props;\r\n    if (!dir) {\r\n        return \"\";\r\n    }\r\n    const num = step + 1 + 7 * oct;\r\n    const d = dir < 0 ? \"-\" : \"\";\r\n    const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = d + num + altToQ(type, alt);\r\n    return name;\r\n}\r\nconst fillStr$1 = (s, n) => Array(Math.abs(n) + 1).join(s);\r\nfunction altToQ(type, alt) {\r\n    if (alt === 0) {\r\n        return type === \"majorable\" ? \"M\" : \"P\";\r\n    }\r\n    else if (alt === -1 && type === \"majorable\") {\r\n        return \"m\";\r\n    }\r\n    else if (alt > 0) {\r\n        return fillStr$1(\"A\", alt);\r\n    }\r\n    else {\r\n        return fillStr$1(\"d\", type === \"perfectable\" ? alt : alt + 1);\r\n    }\r\n}\n\n/**\r\n * Transpose a note by an interval.\r\n *\r\n * @param {string} note - the note or note name\r\n * @param {string} interval - the interval or interval name\r\n * @return {string} the transposed note name or empty string if not valid notes\r\n * @example\r\n * import { tranpose } from \"@tonaljs/tonal\"\r\n * transpose(\"d3\", \"3M\") // => \"F#3\"\r\n * transpose(\"D\", \"3M\") // => \"F#\"\r\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(pc => transpose(pc, \"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\r\n */\r\nfunction transpose(noteName, intervalName) {\r\n    const note$1 = note(noteName);\r\n    const interval$1 = interval(intervalName);\r\n    if (note$1.empty || interval$1.empty) {\r\n        return \"\";\r\n    }\r\n    const noteCoord = note$1.coord;\r\n    const intervalCoord = interval$1.coord;\r\n    const tr = noteCoord.length === 1\r\n        ? [noteCoord[0] + intervalCoord[0]]\r\n        : [noteCoord[0] + intervalCoord[0], noteCoord[1] + intervalCoord[1]];\r\n    return coordToNote(tr).name;\r\n}\r\n/**\r\n * Find the interval distance between two notes or coord classes.\r\n *\r\n * To find distance between coord classes, both notes must be coord classes and\r\n * the interval is always ascending\r\n *\r\n * @param {Note|string} from - the note or note name to calculate distance from\r\n * @param {Note|string} to - the note or note name to calculate distance to\r\n * @return {string} the interval name or empty string if not valid notes\r\n *\r\n */\r\nfunction distance(fromNote, toNote) {\r\n    const from = note(fromNote);\r\n    const to = note(toNote);\r\n    if (from.empty || to.empty) {\r\n        return \"\";\r\n    }\r\n    const fcoord = from.coord;\r\n    const tcoord = to.coord;\r\n    const fifths = tcoord[0] - fcoord[0];\r\n    const octs = fcoord.length === 2 && tcoord.length === 2\r\n        ? tcoord[1] - fcoord[1]\r\n        : -Math.floor((fifths * 7) / 12);\r\n    return coordToInterval([fifths, octs]).name;\r\n}\n\nexport { accToAlt, altToAcc, coordToInterval, coordToNote, decode, distance, encode, interval, isNamed, isPitch, note, tokenize$1 as tokenizeInterval, tokenize as tokenizeNote, transpose };\n//# sourceMappingURL=index.esnext.js.map\n","import { note, transpose as transpose$1 } from '@tonaljs/tonal';\n\nconst fillStr = (character, times) => Array(times + 1).join(character);\r\nconst REGEX = /^(_{1,}|=|\\^{1,}|)([abcdefgABCDEFG])([,']*)$/;\r\nfunction tokenize(str) {\r\n    const m = REGEX.exec(str);\r\n    if (!m) {\r\n        return [\"\", \"\", \"\"];\r\n    }\r\n    return [m[1], m[2], m[3]];\r\n}\r\n/**\r\n * Convert a (string) note in ABC notation into a (string) note in scientific notation\r\n *\r\n * @example\r\n * abcToScientificNotation(\"c\") // => \"C5\"\r\n */\r\nfunction abcToScientificNotation(str) {\r\n    const [acc, letter, oct] = tokenize(str);\r\n    if (letter === \"\") {\r\n        return \"\";\r\n    }\r\n    let o = 4;\r\n    for (let i = 0; i < oct.length; i++) {\r\n        o += oct.charAt(i) === \",\" ? -1 : 1;\r\n    }\r\n    const a = acc[0] === \"_\"\r\n        ? acc.replace(/_/g, \"b\")\r\n        : acc[0] === \"^\"\r\n            ? acc.replace(/\\^/g, \"#\")\r\n            : \"\";\r\n    return letter.charCodeAt(0) > 96\r\n        ? letter.toUpperCase() + a + (o + 1)\r\n        : letter + a + o;\r\n}\r\n/**\r\n * Convert a (string) note in scientific notation into a (string) note in ABC notation\r\n *\r\n * @example\r\n * scientificToAbcNotation(\"C#4\") // => \"^C\"\r\n */\r\nfunction scientificToAbcNotation(str) {\r\n    const n = note(str);\r\n    if (n.empty || !n.oct) {\r\n        return \"\";\r\n    }\r\n    const { letter, acc, oct } = n;\r\n    const a = acc[0] === \"b\" ? acc.replace(/b/g, \"_\") : acc.replace(/#/g, \"^\");\r\n    const l = oct > 4 ? letter.toLowerCase() : letter;\r\n    const o = oct === 5 ? \"\" : oct > 4 ? fillStr(\"'\", oct - 5) : fillStr(\",\", 4 - oct);\r\n    return a + l + o;\r\n}\r\nfunction transpose(note, interval) {\r\n    return scientificToAbcNotation(transpose$1(abcToScientificNotation(note), interval));\r\n}\n\nexport { abcToScientificNotation, scientificToAbcNotation, tokenize, transpose };\n//# sourceMappingURL=index.esnext.js.map\n","import { note } from '@tonaljs/tonal';\n\n// ascending range\r\nfunction ascR(b, n) {\r\n    const a = [];\r\n    // tslint:disable-next-line:curly\r\n    for (; n--; a[n] = n + b)\r\n        ;\r\n    return a;\r\n}\r\n// descending range\r\nfunction descR(b, n) {\r\n    const a = [];\r\n    // tslint:disable-next-line:curly\r\n    for (; n--; a[n] = b - n)\r\n        ;\r\n    return a;\r\n}\r\n/**\r\n * Creates a numeric range\r\n *\r\n * @param {number} from\r\n * @param {number} to\r\n * @return {Array<number>}\r\n *\r\n * @example\r\n * range(-2, 2) // => [-2, -1, 0, 1, 2]\r\n * range(2, -2) // => [2, 1, 0, -1, -2]\r\n */\r\nfunction range(from, to) {\r\n    return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\r\n}\r\n/**\r\n * Rotates a list a number of times. It\"s completly agnostic about the\r\n * contents of the list.\r\n *\r\n * @param {Integer} times - the number of rotations\r\n * @param {Array} array\r\n * @return {Array} the rotated array\r\n *\r\n * @example\r\n * rotate(1, [1, 2, 3]) // => [2, 3, 1]\r\n */\r\nfunction rotate(times, arr) {\r\n    const len = arr.length;\r\n    const n = ((times % len) + len) % len;\r\n    return arr.slice(n, len).concat(arr.slice(0, n));\r\n}\r\n/**\r\n * Return a copy of the array with the null values removed\r\n * @function\r\n * @param {Array} array\r\n * @return {Array}\r\n *\r\n * @example\r\n * compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\r\n */\r\nfunction compact(arr) {\r\n    return arr.filter(n => n === 0 || n);\r\n}\r\n/**\r\n * Sort an array of notes in ascending order. Pitch classes are listed\r\n * before notes. Any string that is not a note is removed.\r\n *\r\n * @param {string[]} notes\r\n * @return {string[]} sorted array of notes\r\n *\r\n * @example\r\n * sortedNoteNames(['c2', 'c5', 'c1', 'c0', 'c6', 'c'])\r\n * // => ['C', 'C0', 'C1', 'C2', 'C5', 'C6']\r\n * sortedNoteNames(['c', 'F', 'G', 'a', 'b', 'h', 'J'])\r\n * // => ['C', 'F', 'G', 'A', 'B']\r\n */\r\nfunction sortedNoteNames(notes) {\r\n    const valid = notes.map(n => note(n)).filter(n => !n.empty);\r\n    return valid.sort((a, b) => a.height - b.height).map(n => n.name);\r\n}\r\n/**\r\n * Get sorted notes with duplicates removed. Pitch classes are listed\r\n * before notes.\r\n *\r\n * @function\r\n * @param {string[]} array\r\n * @return {string[]} unique sorted notes\r\n *\r\n * @example\r\n * Array.sortedUniqNoteNames(['a', 'b', 'c2', '1p', 'p2', 'c2', 'b', 'c', 'c3' ])\r\n * // => [ 'C', 'A', 'B', 'C2', 'C3' ]\r\n */\r\nfunction sortedUniqNoteNames(arr) {\r\n    return sortedNoteNames(arr).filter((n, i, a) => i === 0 || n !== a[i - 1]);\r\n}\r\n/**\r\n * Randomizes the order of the specified array in-place, using the Fisher–Yates shuffle.\r\n *\r\n * @function\r\n * @param {Array} array\r\n * @return {Array} the array shuffled\r\n *\r\n * @example\r\n * shuffle([\"C\", \"D\", \"E\", \"F\"]) // => [...]\r\n */\r\nfunction shuffle(arr, rnd = Math.random) {\r\n    let i;\r\n    let t;\r\n    let m = arr.length;\r\n    while (m) {\r\n        i = Math.floor(rnd() * m--);\r\n        t = arr[m];\r\n        arr[m] = arr[i];\r\n        arr[i] = t;\r\n    }\r\n    return arr;\r\n}\r\n/**\r\n * Get all permutations of an array\r\n *\r\n * @param {Array} array - the array\r\n * @return {Array<Array>} an array with all the permutations\r\n * @example\r\n * permutations([\"a\", \"b\", \"c\"])) // =>\r\n * [\r\n *   [\"a\", \"b\", \"c\"],\r\n *   [\"b\", \"a\", \"c\"],\r\n *   [\"b\", \"c\", \"a\"],\r\n *   [\"a\", \"c\", \"b\"],\r\n *   [\"c\", \"a\", \"b\"],\r\n *   [\"c\", \"b\", \"a\"]\r\n * ]\r\n */\r\nfunction permutations(arr) {\r\n    if (arr.length === 0) {\r\n        return [[]];\r\n    }\r\n    return permutations(arr.slice(1)).reduce((acc, perm) => {\r\n        return acc.concat(arr.map((e, pos) => {\r\n            const newPerm = perm.slice();\r\n            newPerm.splice(pos, 0, arr[0]);\r\n            return newPerm;\r\n        }));\r\n    }, []);\r\n}\n\nexport { compact, permutations, range, rotate, shuffle, sortedNoteNames, sortedUniqNoteNames };\n//# sourceMappingURL=index.esnext.js.map\n","import { range, compact, rotate } from '@tonaljs/array';\nimport { note, interval } from '@tonaljs/tonal';\n\nconst EmptyPcset = {\r\n    empty: true,\r\n    name: \"\",\r\n    setNum: 0,\r\n    chroma: \"000000000000\",\r\n    normalized: \"000000000000\",\r\n    intervals: []\r\n};\r\n// UTILITIES\r\nconst setNumToChroma = (num) => Number(num).toString(2);\r\nconst chromaToNumber = (chroma) => parseInt(chroma, 2);\r\nconst REGEX = /^[01]{12}$/;\r\nfunction isChroma(set) {\r\n    return REGEX.test(set);\r\n}\r\nconst isPcsetNum = (set) => typeof set === \"number\" && set >= 0 && set <= 4095;\r\nconst isPcset = (set) => set && isChroma(set.chroma);\r\nconst cache = { [EmptyPcset.chroma]: EmptyPcset };\r\n/**\r\n * Get the pitch class set of a collection of notes or set number or chroma\r\n */\r\nfunction pcset(src) {\r\n    const chroma = isChroma(src)\r\n        ? src\r\n        : isPcsetNum(src)\r\n            ? setNumToChroma(src)\r\n            : Array.isArray(src)\r\n                ? listToChroma(src)\r\n                : isPcset(src)\r\n                    ? src.chroma\r\n                    : EmptyPcset.chroma;\r\n    return (cache[chroma] = cache[chroma] || chromaToPcset(chroma));\r\n}\r\nconst IVLS = \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\".split(\" \");\r\n/**\r\n * @private\r\n * Get the intervals of a pcset *starting from C*\r\n * @param {Set} set - the pitch class set\r\n * @return {IntervalName[]} an array of interval names or an empty array\r\n * if not a valid pitch class set\r\n */\r\nfunction chromaToIntervals(chroma) {\r\n    const intervals = [];\r\n    for (let i = 0; i < 12; i++) {\r\n        // tslint:disable-next-line:curly\r\n        if (chroma.charAt(i) === \"1\")\r\n            intervals.push(IVLS[i]);\r\n    }\r\n    return intervals;\r\n}\r\nlet all;\r\n/**\r\n * Get a list of all possible pitch class sets (all possible chromas) *having\r\n * C as root*. There are 2048 different chromas. If you want them with another\r\n * note you have to transpose it\r\n *\r\n * @see http://allthescales.org/\r\n * @return {Array<PcsetChroma>} an array of possible chromas from '10000000000' to '11111111111'\r\n */\r\nfunction chromas() {\r\n    all = all || range(2048, 4095).map(setNumToChroma);\r\n    return all.slice();\r\n}\r\n/**\r\n * Given a a list of notes or a pcset chroma, produce the rotations\r\n * of the chroma discarding the ones that starts with \"0\"\r\n *\r\n * This is used, for example, to get all the modes of a scale.\r\n *\r\n * @param {Array|string} set - the list of notes or pitchChr of the set\r\n * @param {boolean} normalize - (Optional, true by default) remove all\r\n * the rotations that starts with \"0\"\r\n * @return {Array<string>} an array with all the modes of the chroma\r\n *\r\n * @example\r\n * Pcset.modes([\"C\", \"D\", \"E\"]).map(Pcset.intervals)\r\n */\r\nfunction modes(set, normalize = true) {\r\n    const pcs = pcset(set);\r\n    const binary = pcs.chroma.split(\"\");\r\n    return compact(binary.map((_, i) => {\r\n        const r = rotate(i, binary);\r\n        return normalize && r[0] === \"0\" ? null : r.join(\"\");\r\n    }));\r\n}\r\n/**\r\n * Test if two pitch class sets are numentical\r\n *\r\n * @param {Array|string} set1 - one of the pitch class sets\r\n * @param {Array|string} set2 - the other pitch class set\r\n * @return {boolean} true if they are equal\r\n * @example\r\n * Pcset.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\r\n */\r\nfunction isEqual(s1, s2) {\r\n    return pcset(s1).setNum === pcset(s2).setNum;\r\n}\r\n/**\r\n * Create a function that test if a collection of notes is a\r\n * subset of a given set\r\n *\r\n * The function is curryfied.\r\n *\r\n * @param {PcsetChroma|NoteName[]} set - the superset to test against (chroma or\r\n * list of notes)\r\n * @return{function(PcsetChroma|NoteNames[]): boolean} a function accepting a set\r\n * to test against (chroma or list of notes)\r\n * @example\r\n * const inCMajor = Pcset.isSubsetOf([\"C\", \"E\", \"G\"])\r\n * inCMajor([\"e6\", \"c4\"]) // => true\r\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\r\n */\r\nfunction isSubsetOf(set) {\r\n    const s = pcset(set).setNum;\r\n    return (notes) => {\r\n        const o = pcset(notes).setNum;\r\n        // tslint:disable-next-line: no-bitwise\r\n        return s && s !== o && (o & s) === o;\r\n    };\r\n}\r\n/**\r\n * Create a function that test if a collection of notes is a\r\n * superset of a given set (it contains all notes and at least one more)\r\n *\r\n * @param {Set} set - an array of notes or a chroma set string to test against\r\n * @return {(subset: Set): boolean} a function that given a set\r\n * returns true if is a subset of the first one\r\n * @example\r\n * const extendsCMajor = Pcset.isSupersetOf([\"C\", \"E\", \"G\"])\r\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\r\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\r\n */\r\nfunction isSupersetOf(set) {\r\n    const s = pcset(set).setNum;\r\n    return (notes) => {\r\n        const o = pcset(notes).setNum;\r\n        // tslint:disable-next-line: no-bitwise\r\n        return s && s !== o && (o | s) === o;\r\n    };\r\n}\r\n/**\r\n * Test if a given pitch class set includes a note\r\n *\r\n * @param {Array<string>} set - the base set to test against\r\n * @param {string} note - the note to test\r\n * @return {boolean} true if the note is included in the pcset\r\n *\r\n * Can be partially applied\r\n *\r\n * @example\r\n * const isNoteInCMajor = isNoteIncludedInSet(['C', 'E', 'G'])\r\n * isNoteInCMajor('C4') // => true\r\n * isNoteInCMajor('C#4') // => false\r\n */\r\nfunction isNoteIncludedInSet(set) {\r\n    const s = pcset(set);\r\n    return (noteName) => {\r\n        const n = note(noteName);\r\n        return s && !n.empty && s.chroma.charAt(n.chroma) === \"1\";\r\n    };\r\n}\r\n/** @deprecated use: isNoteIncludedIn */\r\nconst includes = isNoteIncludedInSet;\r\n/**\r\n * Filter a list with a pitch class set\r\n *\r\n * @param {Array|string} set - the pitch class set notes\r\n * @param {Array|string} notes - the note list to be filtered\r\n * @return {Array} the filtered notes\r\n *\r\n * @example\r\n * Pcset.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\r\n * Pcset.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\r\n */\r\nfunction filter(set) {\r\n    const isIncluded = isNoteIncludedInSet(set);\r\n    return (notes) => {\r\n        return notes.filter(isIncluded);\r\n    };\r\n}\r\n// PRIVATE //\r\nfunction chromaRotations(chroma) {\r\n    const binary = chroma.split(\"\");\r\n    return binary.map((_, i) => rotate(i, binary).join(\"\"));\r\n}\r\nfunction chromaToPcset(chroma) {\r\n    const setNum = chromaToNumber(chroma);\r\n    const normalizedNum = chromaRotations(chroma)\r\n        .map(chromaToNumber)\r\n        .filter(n => n >= 2048)\r\n        .sort()[0];\r\n    const normalized = setNumToChroma(normalizedNum);\r\n    const intervals = chromaToIntervals(chroma);\r\n    return {\r\n        empty: false,\r\n        name: \"\",\r\n        setNum,\r\n        chroma,\r\n        normalized,\r\n        intervals\r\n    };\r\n}\r\nfunction listToChroma(set) {\r\n    if (set.length === 0) {\r\n        return EmptyPcset.chroma;\r\n    }\r\n    let pitch;\r\n    const binary = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let i = 0; i < set.length; i++) {\r\n        pitch = note(set[i]);\r\n        // tslint:disable-next-line: curly\r\n        if (pitch.empty)\r\n            pitch = interval(set[i]);\r\n        // tslint:disable-next-line: curly\r\n        if (!pitch.empty)\r\n            binary[pitch.chroma] = 1;\r\n    }\r\n    return binary.join(\"\");\r\n}\n\nexport { EmptyPcset, chromaToIntervals, chromas, filter, includes, isEqual, isNoteIncludedInSet, isSubsetOf, isSupersetOf, modes, pcset };\n//# sourceMappingURL=index.esnext.js.map\n","import { pcset, EmptyPcset } from '@tonaljs/pcset';\n\n/**\r\n * @private\r\n * Chord List\r\n * Source: https://en.wikibooks.org/wiki/Music_Theory/Complete_List_of_Chord_Patterns\r\n * Format: [\"intervals\", \"full name\", \"abrv1 abrv2\"]\r\n */\r\nconst CHORDS = [\r\n    // ==Major==\r\n    [\"1P 3M 5P\", \"major\", \"M \"],\r\n    [\"1P 3M 5P 7M\", \"major seventh\", \"maj7 Δ ma7 M7 Maj7\"],\r\n    [\"1P 3M 5P 7M 9M\", \"major ninth\", \"maj9 Δ9\"],\r\n    [\"1P 3M 5P 7M 9M 13M\", \"major thirteenth\", \"maj13 Maj13\"],\r\n    [\"1P 3M 5P 6M\", \"sixth\", \"6 add6 add13 M6\"],\r\n    [\"1P 3M 5P 6M 9M\", \"sixth/ninth\", \"6/9 69\"],\r\n    [\"1P 3M 5P 7M 11A\", \"lydian\", \"maj#4 Δ#4 Δ#11\"],\r\n    [\"1P 3M 6m 7M\", \"major seventh b6\", \"M7b6\"],\r\n    // ==Minor==\r\n    // '''Normal'''\r\n    [\"1P 3m 5P\", \"minor\", \"m min -\"],\r\n    [\"1P 3m 5P 7m\", \"minor seventh\", \"m7 min7 mi7 -7\"],\r\n    [\"1P 3m 5P 7M\", \"minor/major seventh\", \"m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ\"],\r\n    [\"1P 3m 5P 6M\", \"minor sixth\", \"m6\"],\r\n    [\"1P 3m 5P 7m 9M\", \"minor ninth\", \"m9\"],\r\n    [\"1P 3m 5P 7m 9M 11P\", \"minor eleventh\", \"m11\"],\r\n    [\"1P 3m 5P 7m 9M 13M\", \"minor thirteenth\", \"m13\"],\r\n    // '''Diminished'''\r\n    [\"1P 3m 5d\", \"diminished\", \"dim ° o\"],\r\n    [\"1P 3m 5d 7d\", \"diminished seventh\", \"dim7 °7 o7\"],\r\n    [\"1P 3m 5d 7m\", \"half-diminished\", \"m7b5 ø\"],\r\n    // ==Dominant/Seventh==\r\n    // '''Normal'''\r\n    [\"1P 3M 5P 7m\", \"dominant seventh\", \"7 dom\"],\r\n    [\"1P 3M 5P 7m 9M\", \"dominant ninth\", \"9\"],\r\n    [\"1P 3M 5P 7m 9M 13M\", \"dominant thirteenth\", \"13\"],\r\n    [\"1P 3M 5P 7m 11A\", \"lydian dominant seventh\", \"7#11 7#4\"],\r\n    // '''Altered'''\r\n    [\"1P 3M 5P 7m 9m\", \"dominant b9\", \"7b9\"],\r\n    [\"1P 3M 5P 7m 9A\", \"dominant #9\", \"7#9\"],\r\n    [\"1P 3M 7m 9m\", \"altered\", \"alt7\"],\r\n    // '''Suspended'''\r\n    [\"1P 4P 5P\", \"suspended 4th\", \"sus4\"],\r\n    [\"1P 2M 5P\", \"suspended 2nd\", \"sus2\"],\r\n    [\"1P 4P 5P 7m\", \"suspended 4th seventh\", \"7sus4\"],\r\n    [\"1P 5P 7m 9M 11P\", \"eleventh\", \"11 sus Bb/C for C11\"],\r\n    [\"1P 4P 5P 7m 9m\", \"suspended 4th b9\", \"b9sus phryg\"],\r\n    // ==Other==\r\n    [\"1P 5P\", \"fifth\", \"5\"],\r\n    [\"1P 3M 5A\", \"augmented\", \"aug + +5\"],\r\n    [\"1P 3M 5A 7M\", \"augmented seventh\", \"maj7#5 maj7+5\"],\r\n    [\"1P 3M 5P 7M 9M 11A\", \"major #11 (lydian)\", \"maj9#11 Δ9#11\"],\r\n    // ==Legacy==\r\n    [\"1P 2M 4P 5P\", \"\", \"sus24 sus4add9\"],\r\n    [\"1P 3M 13m\", \"\", \"Mb6\"],\r\n    [\"1P 3M 5A 7M 9M\", \"\", \"maj9#5 Maj9#5\"],\r\n    [\"1P 3M 5A 7m\", \"\", \"7#5 +7 7aug aug7\"],\r\n    [\"1P 3M 5A 7m 9A\", \"\", \"7#5#9 7alt 7#5#9_ 7#9b13_\"],\r\n    [\"1P 3M 5A 7m 9M\", \"\", \"9#5 9+\"],\r\n    [\"1P 3M 5A 7m 9M 11A\", \"\", \"9#5#11\"],\r\n    [\"1P 3M 5A 7m 9m\", \"\", \"7#5b9\"],\r\n    [\"1P 3M 5A 7m 9m 11A\", \"\", \"7#5b9#11\"],\r\n    [\"1P 3M 5A 9A\", \"\", \"+add#9\"],\r\n    [\"1P 3M 5A 9M\", \"\", \"M#5add9 +add9\"],\r\n    [\"1P 3M 5P 6M 11A\", \"\", \"M6#11 M6b5 6#11 6b5\"],\r\n    [\"1P 3M 5P 6M 7M 9M\", \"\", \"M7add13\"],\r\n    [\"1P 3M 5P 6M 9M 11A\", \"\", \"69#11\"],\r\n    [\"1P 3M 5P 6m 7m\", \"\", \"7b6\"],\r\n    [\"1P 3M 5P 7M 9A 11A\", \"\", \"maj7#9#11\"],\r\n    [\"1P 3M 5P 7M 9M 11A 13M\", \"\", \"M13#11 maj13#11 M13+4 M13#4\"],\r\n    [\"1P 3M 5P 7M 9m\", \"\", \"M7b9\"],\r\n    [\"1P 3M 5P 7m 11A 13m\", \"\", \"7#11b13 7b5b13\"],\r\n    [\"1P 3M 5P 7m 13M\", \"\", \"7add6 67 7add13\"],\r\n    [\"1P 3M 5P 7m 9A 11A\", \"\", \"7#9#11 7b5#9\"],\r\n    [\"1P 3M 5P 7m 9A 11A 13M\", \"\", \"13#9#11\"],\r\n    [\"1P 3M 5P 7m 9A 11A 13m\", \"\", \"7#9#11b13\"],\r\n    [\"1P 3M 5P 7m 9A 13M\", \"\", \"13#9 13#9_\"],\r\n    [\"1P 3M 5P 7m 9A 13m\", \"\", \"7#9b13\"],\r\n    [\"1P 3M 5P 7m 9M 11A\", \"\", \"9#11 9+4 9#4 9#11_ 9#4_\"],\r\n    [\"1P 3M 5P 7m 9M 11A 13M\", \"\", \"13#11 13+4 13#4\"],\r\n    [\"1P 3M 5P 7m 9M 11A 13m\", \"\", \"9#11b13 9b5b13\"],\r\n    [\"1P 3M 5P 7m 9m 11A\", \"\", \"7b9#11 7b5b9\"],\r\n    [\"1P 3M 5P 7m 9m 11A 13M\", \"\", \"13b9#11\"],\r\n    [\"1P 3M 5P 7m 9m 11A 13m\", \"\", \"7b9b13#11 7b9#11b13 7b5b9b13\"],\r\n    [\"1P 3M 5P 7m 9m 13M\", \"\", \"13b9\"],\r\n    [\"1P 3M 5P 7m 9m 13m\", \"\", \"7b9b13\"],\r\n    [\"1P 3M 5P 7m 9m 9A\", \"\", \"7b9#9\"],\r\n    [\"1P 3M 5P 9M\", \"\", \"Madd9 2 add9 add2\"],\r\n    [\"1P 3M 5P 9m\", \"\", \"Maddb9\"],\r\n    [\"1P 3M 5d\", \"\", \"Mb5\"],\r\n    [\"1P 3M 5d 6M 7m 9M\", \"\", \"13b5\"],\r\n    [\"1P 3M 5d 7M\", \"\", \"M7b5\"],\r\n    [\"1P 3M 5d 7M 9M\", \"\", \"M9b5\"],\r\n    [\"1P 3M 5d 7m\", \"\", \"7b5\"],\r\n    [\"1P 3M 5d 7m 9M\", \"\", \"9b5\"],\r\n    [\"1P 3M 7m\", \"\", \"7no5\"],\r\n    [\"1P 3M 7m 13m\", \"\", \"7b13\"],\r\n    [\"1P 3M 7m 9M\", \"\", \"9no5\"],\r\n    [\"1P 3M 7m 9M 13M\", \"\", \"13no5\"],\r\n    [\"1P 3M 7m 9M 13m\", \"\", \"9b13\"],\r\n    [\"1P 3m 4P 5P\", \"\", \"madd4\"],\r\n    [\"1P 3m 5A\", \"\", \"m#5 m+ mb6\"],\r\n    [\"1P 3m 5P 6M 9M\", \"\", \"m69 _69\"],\r\n    [\"1P 3m 5P 6m 7M\", \"\", \"mMaj7b6\"],\r\n    [\"1P 3m 5P 6m 7M 9M\", \"\", \"mMaj9b6\"],\r\n    [\"1P 3m 5P 7M 9M\", \"\", \"mMaj9 -Maj9\"],\r\n    [\"1P 3m 5P 7m 11P\", \"\", \"m7add11 m7add4\"],\r\n    [\"1P 3m 5P 9M\", \"\", \"madd9\"],\r\n    [\"1P 3m 5d 6M 7M\", \"\", \"o7M7\"],\r\n    [\"1P 3m 5d 7M\", \"\", \"oM7\"],\r\n    [\"1P 3m 5d 7m\", \"\", \"m7b5 half-diminished h7 _7b5\"],\r\n    [\"1P 3m 6m 7M\", \"\", \"mb6M7\"],\r\n    [\"1P 3m 6m 7m\", \"\", \"m7#5\"],\r\n    [\"1P 3m 6m 7m 9M\", \"\", \"m9#5\"],\r\n    [\"1P 3m 6m 7m 9M 11P\", \"\", \"m11A\"],\r\n    [\"1P 3m 6m 9m\", \"\", \"mb6b9\"],\r\n    [\"1P 3m 7m 12d 2M\", \"\", \"m9b5 h9 -9b5\"],\r\n    [\"1P 3m 7m 12d 2M 4P\", \"\", \"m11b5 h11 _11b5\"],\r\n    [\"1P 4P 5A 7M\", \"\", \"M7#5sus4\"],\r\n    [\"1P 4P 5A 7M 9M\", \"\", \"M9#5sus4\"],\r\n    [\"1P 4P 5A 7m\", \"\", \"7#5sus4\"],\r\n    [\"1P 4P 5P 7M\", \"\", \"M7sus4\"],\r\n    [\"1P 4P 5P 7M 9M\", \"\", \"M9sus4\"],\r\n    [\"1P 4P 5P 7m 9M\", \"\", \"9sus4 9sus\"],\r\n    [\"1P 4P 5P 7m 9M 13M\", \"\", \"13sus4 13sus\"],\r\n    [\"1P 4P 5P 7m 9m 13m\", \"\", \"7sus4b9b13 7b9b13sus4\"],\r\n    [\"1P 4P 7m 10m\", \"\", \"4 quartal\"],\r\n    [\"1P 5P 7m 9m 11P\", \"\", \"11b9\"]\r\n];\n\nconst NoChordType = {\r\n    ...EmptyPcset,\r\n    name: \"\",\r\n    quality: \"Unknown\",\r\n    intervals: [],\r\n    aliases: []\r\n};\r\nlet chords = [];\r\nlet index = {};\r\n/**\r\n * Given a chord name or chroma, return the chord properties\r\n * @param {string} source - chord name or pitch class set chroma\r\n * @example\r\n * import { chord } from 'tonaljs/chord-dictionary'\r\n * chord('major')\r\n */\r\nfunction chordType(type) {\r\n    return index[type] || NoChordType;\r\n}\r\n/**\r\n * Keys used to reference chord types\r\n */\r\nfunction keys() {\r\n    return Object.keys(index);\r\n}\r\n/**\r\n * Return a list of all chord types\r\n */\r\nfunction entries() {\r\n    return chords.slice();\r\n}\r\n/**\r\n * Clear the dictionary\r\n */\r\nfunction clear() {\r\n    chords = [];\r\n    index = {};\r\n}\r\n/**\r\n * Add a chord to the dictionary.\r\n * @param intervals\r\n * @param aliases\r\n * @param [fullName]\r\n */\r\nfunction add(intervals, aliases, fullName) {\r\n    const quality = getQuality(intervals);\r\n    const chord = {\r\n        ...pcset(intervals),\r\n        name: fullName || \"\",\r\n        quality,\r\n        intervals,\r\n        aliases\r\n    };\r\n    chords.push(chord);\r\n    if (chord.name) {\r\n        index[chord.name] = chord;\r\n    }\r\n    index[chord.setNum] = chord;\r\n    index[chord.chroma] = chord;\r\n    chord.aliases.forEach(alias => addAlias(chord, alias));\r\n}\r\nfunction addAlias(chord, alias) {\r\n    index[alias] = chord;\r\n}\r\nfunction getQuality(intervals) {\r\n    const has = (interval) => intervals.indexOf(interval) !== -1;\r\n    return has(\"5A\")\r\n        ? \"Augmented\"\r\n        : has(\"3M\")\r\n            ? \"Major\"\r\n            : has(\"5d\")\r\n                ? \"Diminished\"\r\n                : has(\"3m\")\r\n                    ? \"Minor\"\r\n                    : \"Unknown\";\r\n}\r\nCHORDS.forEach(([ivls, fullName, names]) => add(ivls.split(\" \"), names.split(\" \"), fullName));\r\nchords.sort((a, b) => a.setNum - b.setNum);\n\nexport { add, addAlias, chordType, clear, entries, keys };\n//# sourceMappingURL=index.esnext.js.map\n","import { EmptyPcset, pcset } from '@tonaljs/pcset';\n\n// SCALES\r\n// Format: [\"intervals\", \"name\", \"alias1\", \"alias2\", ...]\r\nconst SCALES = [\r\n    // 5-note scales\r\n    [\"1P 2M 3M 5P 6M\", \"major pentatonic\", \"pentatonic\"],\r\n    [\"1P 3M 4P 5P 7M\", \"ionian pentatonic\"],\r\n    [\"1P 3M 4P 5P 7m\", \"mixolydian pentatonic\", \"indian\"],\r\n    [\"1P 2M 4P 5P 6M\", \"ritusen\"],\r\n    [\"1P 2M 4P 5P 7m\", \"egyptian\"],\r\n    [\"1P 3M 4P 5d 7m\", \"neopolitan major pentatonic\"],\r\n    [\"1P 3m 4P 5P 6m\", \"vietnamese 1\"],\r\n    [\"1P 2m 3m 5P 6m\", \"pelog\"],\r\n    [\"1P 2m 4P 5P 6m\", \"kumoijoshi\"],\r\n    [\"1P 2M 3m 5P 6m\", \"hirajoshi\"],\r\n    [\"1P 2m 4P 5d 7m\", \"iwato\"],\r\n    [\"1P 2m 4P 5P 7m\", \"in-sen\"],\r\n    [\"1P 3M 4A 5P 7M\", \"lydian pentatonic\", \"chinese\"],\r\n    [\"1P 3m 4P 6m 7m\", \"malkos raga\"],\r\n    [\"1P 3m 4P 5d 7m\", \"locrian pentatonic\", \"minor seven flat five pentatonic\"],\r\n    [\"1P 3m 4P 5P 7m\", \"minor pentatonic\", \"vietnamese 2\"],\r\n    [\"1P 3m 4P 5P 6M\", \"minor six pentatonic\"],\r\n    [\"1P 2M 3m 5P 6M\", \"flat three pentatonic\", \"kumoi\"],\r\n    [\"1P 2M 3M 5P 6m\", \"flat six pentatonic\"],\r\n    [\"1P 2m 3M 5P 6M\", \"scriabin\"],\r\n    [\"1P 3M 5d 6m 7m\", \"whole tone pentatonic\"],\r\n    [\"1P 3M 4A 5A 7M\", \"lydian #5P pentatonic\"],\r\n    [\"1P 3M 4A 5P 7m\", \"lydian dominant pentatonic\"],\r\n    [\"1P 3m 4P 5P 7M\", \"minor #7M pentatonic\"],\r\n    [\"1P 3m 4d 5d 7m\", \"super locrian pentatonic\"],\r\n    // 6-note scales\r\n    [\"1P 2M 3m 4P 5P 7M\", \"minor hexatonic\"],\r\n    [\"1P 2A 3M 5P 5A 7M\", \"augmented\"],\r\n    [\"1P 3m 4P 5d 5P 7m\", \"minor blues\", \"blues\"],\r\n    [\"1P 2M 3m 3M 5P 6M\", \"major blues\"],\r\n    [\"1P 2M 4P 5P 6M 7m\", \"piongio\"],\r\n    [\"1P 2m 3M 4A 6M 7m\", \"prometheus neopolitan\"],\r\n    [\"1P 2M 3M 4A 6M 7m\", \"prometheus\"],\r\n    [\"1P 2m 3M 5d 6m 7m\", \"mystery #1\"],\r\n    [\"1P 2m 3M 4P 5A 6M\", \"six tone symmetric\"],\r\n    [\"1P 2M 3M 4A 5A 7m\", \"whole tone\"],\r\n    // 7-note scales\r\n    [\"1P 2M 3M 4P 5d 6m 7m\", \"locrian major\", \"arabian\"],\r\n    [\"1P 2m 3M 4A 5P 6m 7M\", \"double harmonic lydian\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7M\", \"harmonic minor\"],\r\n    [\r\n        \"1P 2m 3m 3M 5d 6m 7m\",\r\n        \"altered\",\r\n        \"super locrian\",\r\n        \"diminished whole tone\",\r\n        \"pomeroy\"\r\n    ],\r\n    [\"1P 2M 3m 4P 5d 6m 7m\", \"locrian #2\", \"half-diminished\", '\"aeolian b5'],\r\n    [\r\n        \"1P 2M 3M 4P 5P 6m 7m\",\r\n        \"mixolydian b6\",\r\n        \"melodic minor fifth mode\",\r\n        \"hindu\"\r\n    ],\r\n    [\"1P 2M 3M 4A 5P 6M 7m\", \"lydian dominant\", \"lydian b7\", \"overtone\"],\r\n    [\"1P 2M 3M 4A 5P 6M 7M\", \"lydian\"],\r\n    [\"1P 2M 3M 4A 5A 6M 7M\", \"lydian augmented\"],\r\n    [\r\n        \"1P 2m 3m 4P 5P 6M 7m\",\r\n        \"dorian b2\",\r\n        \"phrygian #6\",\r\n        \"melodic minor second mode\"\r\n    ],\r\n    [\"1P 2M 3m 4P 5P 6M 7M\", \"melodic minor\"],\r\n    [\"1P 2m 3m 4P 5d 6m 7m\", \"locrian\"],\r\n    [\r\n        \"1P 2m 3m 4d 5d 6m 7d\",\r\n        \"ultralocrian\",\r\n        \"superlocrian bb7\",\r\n        \"·superlocrian diminished\"\r\n    ],\r\n    [\"1P 2m 3m 4P 5d 6M 7m\", \"locrian 6\", \"locrian natural 6\", \"locrian sharp 6\"],\r\n    [\"1P 2A 3M 4P 5P 5A 7M\", \"augmented heptatonic\"],\r\n    [\"1P 2M 3m 5d 5P 6M 7m\", \"romanian minor\"],\r\n    [\"1P 2M 3m 4A 5P 6M 7m\", \"dorian #4\"],\r\n    [\"1P 2M 3m 4A 5P 6M 7M\", \"lydian diminished\"],\r\n    [\"1P 2m 3m 4P 5P 6m 7m\", \"phrygian\"],\r\n    [\"1P 2M 3M 4A 5A 7m 7M\", \"leading whole tone\"],\r\n    [\"1P 2M 3M 4A 5P 6m 7m\", \"lydian minor\"],\r\n    [\"1P 2m 3M 4P 5P 6m 7m\", \"phrygian dominant\", \"spanish\", \"phrygian major\"],\r\n    [\"1P 2m 3m 4P 5P 6m 7M\", \"balinese\"],\r\n    [\"1P 2m 3m 4P 5P 6M 7M\", \"neopolitan major\", \"dorian b2\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7m\", \"aeolian\", \"minor\"],\r\n    [\"1P 2M 3M 4P 5P 6m 7M\", \"harmonic major\"],\r\n    [\"1P 2m 3M 4P 5P 6m 7M\", \"double harmonic major\", \"gypsy\"],\r\n    [\"1P 2M 3m 4P 5P 6M 7m\", \"dorian\"],\r\n    [\"1P 2M 3m 4A 5P 6m 7M\", \"hungarian minor\"],\r\n    [\"1P 2A 3M 4A 5P 6M 7m\", \"hungarian major\"],\r\n    [\"1P 2m 3M 4P 5d 6M 7m\", \"oriental\"],\r\n    [\"1P 2m 3m 3M 4A 5P 7m\", \"flamenco\"],\r\n    [\"1P 2m 3m 4A 5P 6m 7M\", \"todi raga\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7m\", \"mixolydian\", \"dominant\"],\r\n    [\"1P 2m 3M 4P 5d 6m 7M\", \"persian\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7M\", \"major\", \"ionian\"],\r\n    [\"1P 2m 3M 5d 6m 7m 7M\", \"enigmatic\"],\r\n    [\r\n        \"1P 2M 3M 4P 5A 6M 7M\",\r\n        \"major augmented\",\r\n        \"major #5\",\r\n        \"ionian augmented\",\r\n        \"ionian #5\"\r\n    ],\r\n    [\"1P 2A 3M 4A 5P 6M 7M\", \"lydian #9\"],\r\n    // 8-note scales\r\n    [\"1P 2m 3M 4P 4A 5P 6m 7M\", \"purvi raga\"],\r\n    [\"1P 2m 3m 3M 4P 5P 6m 7m\", \"spanish heptatonic\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7m 7M\", \"bebop\"],\r\n    [\"1P 2M 3m 3M 4P 5P 6M 7m\", \"bebop minor\"],\r\n    [\"1P 2M 3M 4P 5P 5A 6M 7M\", \"bebop major\"],\r\n    [\"1P 2m 3m 4P 5d 5P 6m 7m\", \"bebop locrian\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7m 7M\", \"minor bebop\"],\r\n    [\"1P 2M 3m 4P 5d 6m 6M 7M\", \"diminished\", \"whole-half diminished\"],\r\n    [\"1P 2M 3M 4P 5d 5P 6M 7M\", \"ichikosucho\"],\r\n    [\"1P 2M 3m 4P 5P 6m 6M 7M\", \"minor six diminished\"],\r\n    [\"1P 2m 3m 3M 4A 5P 6M 7m\", \"half-whole diminished\", \"dominant diminished\"],\r\n    [\"1P 3m 3M 4P 5P 6M 7m 7M\", \"kafi raga\"],\r\n    // 9-note scales\r\n    [\"1P 2M 3m 3M 4P 5d 5P 6M 7m\", \"composite blues\"],\r\n    // 12-note scales\r\n    [\"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\", \"chromatic\"]\r\n];\n\nconst NoScaleType = {\r\n    ...EmptyPcset,\r\n    intervals: [],\r\n    aliases: []\r\n};\r\nlet scales = [];\r\nlet index = {};\r\n/**\r\n * Given a scale name or chroma, return the scale properties\r\n * @param {string} type - scale name or pitch class set chroma\r\n * @example\r\n * import { scale } from 'tonaljs/scale-dictionary'\r\n * scale('major')\r\n */\r\nfunction scaleType(type) {\r\n    return index[type] || NoScaleType;\r\n}\r\n/**\r\n * Return a list of all scale types\r\n */\r\nfunction entries() {\r\n    return scales.slice();\r\n}\r\n/**\r\n * Keys used to reference scale types\r\n */\r\nfunction keys() {\r\n    return Object.keys(index);\r\n}\r\n/**\r\n * Clear the dictionary\r\n */\r\nfunction clear() {\r\n    scales = [];\r\n    index = {};\r\n}\r\n/**\r\n * Add a scale into dictionary\r\n * @param intervals\r\n * @param name\r\n * @param aliases\r\n */\r\nfunction add(intervals, name, aliases = []) {\r\n    const scale = { ...pcset(intervals), name, intervals, aliases };\r\n    scales.push(scale);\r\n    index[scale.name] = scale;\r\n    index[scale.setNum] = scale;\r\n    index[scale.chroma] = scale;\r\n    scale.aliases.forEach(alias => addAlias(scale, alias));\r\n    return scale;\r\n}\r\nfunction addAlias(scale, alias) {\r\n    index[alias] = scale;\r\n}\r\nSCALES.forEach(([ivls, name, ...aliases]) => add(ivls.split(\" \"), name, aliases));\n\nexport { NoScaleType, add, addAlias, clear, entries, keys, scaleType };\n//# sourceMappingURL=index.esnext.js.map\n","import { chordType, entries as entries$1 } from '@tonaljs/chord-dictionary';\nimport { isSupersetOf, isSubsetOf } from '@tonaljs/pcset';\nimport { entries } from '@tonaljs/scale-dictionary';\nimport { tokenizeNote, note, transpose as transpose$1 } from '@tonaljs/tonal';\n\nconst NoChord = {\r\n    empty: true,\r\n    name: \"\",\r\n    type: \"\",\r\n    tonic: null,\r\n    setNum: NaN,\r\n    quality: \"Unknown\",\r\n    chroma: \"\",\r\n    normalized: \"\",\r\n    aliases: [],\r\n    notes: [],\r\n    intervals: []\r\n};\r\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\r\n// (see https://github.com/danigb/tonal/issues/55)\r\nconst NUM_TYPES = /^(6|64|7|9|11|13)$/;\r\n/**\r\n * Tokenize a chord name. It returns an array with the tonic and chord type\r\n * If not tonic is found, all the name is considered the chord name.\r\n *\r\n * This function does NOT check if the chord type exists or not. It only tries\r\n * to split the tonic and chord type.\r\n *\r\n * @function\r\n * @param {string} name - the chord name\r\n * @return {Array} an array with [tonic, type]\r\n * @example\r\n * tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\r\n * tokenize(\"C7\") // => [ \"C\", \"7\" ]\r\n * tokenize(\"mMaj7\") // => [ null, \"mMaj7\" ]\r\n * tokenize(\"Cnonsense\") // => [ null, \"nonsense\" ]\r\n */\r\nfunction tokenize(name) {\r\n    const [lt, acc, oct, type] = tokenizeNote(name);\r\n    if (lt === \"\") {\r\n        return [\"\", name];\r\n    }\r\n    // aug is augmented (see https://github.com/danigb/tonal/issues/55)\r\n    if (lt === \"A\" && type === \"ug\") {\r\n        return [\"\", \"aug\"];\r\n    }\r\n    // see: https://github.com/tonaljs/tonal/issues/70\r\n    if (!type && (oct === \"4\" || oct === \"5\")) {\r\n        return [lt + acc, oct];\r\n    }\r\n    if (NUM_TYPES.test(oct)) {\r\n        return [lt + acc, oct + type];\r\n    }\r\n    else {\r\n        return [lt + acc + oct, type];\r\n    }\r\n}\r\n/**\r\n * Get a Chord from a chord name.\r\n */\r\nfunction chord(src) {\r\n    const tokens = Array.isArray(src) ? src : tokenize(src);\r\n    const tonic = note(tokens[0]).name;\r\n    const st = chordType(tokens[1]);\r\n    if (st.empty || src === \"\") {\r\n        return NoChord;\r\n    }\r\n    const type = st.name;\r\n    const notes = tonic\r\n        ? st.intervals.map(i => transpose$1(tonic, i))\r\n        : [];\r\n    const name = tonic ? tonic + \" \" + type : type;\r\n    return { ...st, name, type, tonic, notes };\r\n}\r\n/**\r\n * Transpose a chord name\r\n *\r\n * @param {string} chordName - the chord name\r\n * @return {string} the transposed chord\r\n *\r\n * @example\r\n * transpose('Dm7', 'P4') // => 'Gm7\r\n */\r\nfunction transpose(chordName, interval) {\r\n    const [tonic, type] = tokenize(chordName);\r\n    if (!tonic) {\r\n        return name;\r\n    }\r\n    return transpose$1(tonic, interval) + type;\r\n}\r\n/**\r\n * Get all scales where the given chord fits\r\n *\r\n * @example\r\n * chordScales('C7b9')\r\n * // => [\"phrygian dominant\", \"flamenco\", \"spanish heptatonic\", \"half-whole diminished\", \"chromatic\"]\r\n */\r\nfunction chordScales(name) {\r\n    const s = chord(name);\r\n    const isChordIncluded = isSupersetOf(s.chroma);\r\n    return entries()\r\n        .filter(scale => isChordIncluded(scale.chroma))\r\n        .map(scale => scale.name);\r\n}\r\n/**\r\n * Get all chords names that are a superset of the given one\r\n * (has the same notes and at least one more)\r\n *\r\n * @function\r\n * @example\r\n * extended(\"CMaj7\")\r\n * // => [ 'Cmaj#4', 'Cmaj7#9#11', 'Cmaj9', 'CM7add13', 'Cmaj13', 'Cmaj9#11', 'CM13#11', 'CM7b9' ]\r\n */\r\nfunction extended(chordName) {\r\n    const s = chord(chordName);\r\n    const isSuperset = isSupersetOf(s.chroma);\r\n    return entries$1()\r\n        .filter(chord => isSuperset(chord.chroma))\r\n        .map(chord => s.tonic + chord.aliases[0]);\r\n}\r\n/**\r\n * Find all chords names that are a subset of the given one\r\n * (has less notes but all from the given chord)\r\n *\r\n * @example\r\n */\r\nfunction reduced(chordName) {\r\n    const s = chord(chordName);\r\n    const isSubset = isSubsetOf(s.chroma);\r\n    return entries$1()\r\n        .filter(chord => isSubset(chord.chroma))\r\n        .map(chord => s.tonic + chord.aliases[0]);\r\n}\n\nexport { chord, chordScales, extended, reduced, tokenize, transpose };\n//# sourceMappingURL=index.esnext.js.map\n","import { interval, coordToInterval } from '@tonaljs/tonal';\nexport { tokenizeInterval as tokenize } from '@tonaljs/tonal';\n\n/**\r\n * Get the natural list of names\r\n */\r\nfunction names() {\r\n    return \"1P 2M 3M 4P 5P 6m 7m\".split(\" \");\r\n}\r\n/**\r\n * Get the simplified version of an interval.\r\n *\r\n * @function\r\n * @param {string} interval - the interval to simplify\r\n * @return {string} the simplified interval\r\n *\r\n * @example\r\n * simplify(\"9M\") // => \"2M\"\r\n * [\"8P\", \"9M\", \"10M\", \"11P\", \"12P\", \"13M\", \"14M\", \"15P\"].map(simplify)\r\n * // => [ \"8P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\r\n * simplify(\"2M\") // => \"2M\"\r\n * simplify(\"-2M\") // => \"7m\"\r\n */\r\nfunction simplify(name) {\r\n    const i = interval(name);\r\n    return i.empty ? \"\" : i.simple + i.q;\r\n}\r\n/**\r\n * Get the inversion (https://en.wikipedia.org/wiki/Inversion_(music)#Intervals)\r\n * of an interval.\r\n *\r\n * @function\r\n * @param {string} interval - the interval to invert in interval shorthand\r\n * notation or interval array notation\r\n * @return {string} the inverted interval\r\n *\r\n * @example\r\n * invert(\"3m\") // => \"6M\"\r\n * invert(\"2M\") // => \"7m\"\r\n */\r\nfunction invert(name) {\r\n    const i = interval(name);\r\n    if (i.empty) {\r\n        return \"\";\r\n    }\r\n    const step = (7 - i.step) % 7;\r\n    const alt = i.type === \"perfectable\" ? -i.alt : -(i.alt + 1);\r\n    return interval({ step, alt, oct: i.oct, dir: i.dir }).name;\r\n}\r\n// interval numbers\r\nconst IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\n// interval qualities\r\nconst IQ = \"P m M m M P d P m M m M\".split(\" \");\r\n/**\r\n * Get interval name from semitones number. Since there are several interval\r\n * names for the same number, the name it\"s arbitraty, but deterministic.\r\n *\r\n * @param {Integer} num - the number of semitones (can be negative)\r\n * @return {string} the interval name\r\n * @example\r\n * fromSemitones(7) // => \"5P\"\r\n * fromSemitones(-7) // => \"-5P\"\r\n */\r\nfunction fromSemitones(semitones) {\r\n    const d = semitones < 0 ? -1 : 1;\r\n    const n = Math.abs(semitones);\r\n    const c = n % 12;\r\n    const o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n}\r\nfunction combine(fn) {\r\n    return (a, b) => {\r\n        const coordA = interval(a).coord;\r\n        const coordB = interval(b).coord;\r\n        if (coordA && coordB) {\r\n            const coord = fn(coordA, coordB);\r\n            return coordToInterval(coord).name;\r\n        }\r\n    };\r\n}\r\n/**\r\n * Adds two intervals\r\n *\r\n * @function\r\n * @param {string} interval1\r\n * @param {string} interval2\r\n * @return {string} the added interval name\r\n * @example\r\n * import { add } from \"@tonaljs/tonal\"\r\n * add(\"3m\", \"5P\") // => \"7m\"\r\n */\r\nconst add = combine((a, b) => [a[0] + b[0], a[1] + b[1]]);\r\n/**\r\n * Subtracts two intervals\r\n *\r\n * @function\r\n * @param {string} minuendInterval\r\n * @param {string} subtrahendInterval\r\n * @return {string} the substracted interval name\r\n * @example\r\n * import { substract } from '@tonaljs/tonal'\r\n * substract('5P', '3M') // => '3m'\r\n * substract('3M', '5P') // => '-3m'\r\n */\r\nconst substract = combine((a, b) => [a[0] - b[0], a[1] - b[1]]);\n\nexport { add, fromSemitones, invert, names, simplify, substract };\n//# sourceMappingURL=index.esnext.js.map\n","import { note } from '@tonaljs/tonal';\n\nfunction isMidi(arg) {\r\n    return +arg >= 0 && +arg <= 127;\r\n}\r\n/**\r\n * Get the note midi number (a number between 0 and 127)\r\n *\r\n * It returns undefined if not valid note name\r\n *\r\n * @function\r\n * @param {string|number} note - the note name or midi number\r\n * @return {Integer} the midi number or undefined if not valid note\r\n * @example\r\n * import { toMidi } from '@tonaljs/midi'\r\n * toMidi(\"C4\") // => 60\r\n * toMidi(60) // => 60\r\n * toMidi('60') // => 60\r\n */\r\nfunction toMidi(note$1) {\r\n    if (isMidi(note$1)) {\r\n        return +note$1;\r\n    }\r\n    const n = note(note$1);\r\n    return n.empty ? null : n.midi;\r\n}\r\n/**\r\n * Get the frequency in hertzs from midi number\r\n *\r\n * @param {number} midi - the note midi number\r\n * @param {number} [tuning = 440] - A4 tuning frequency in Hz (440 by default)\r\n * @return {number} the frequency or null if not valid note midi\r\n * @example\r\n * import { midiToFreq} from '@tonaljs/midi'\r\n * midiToFreq(69) // => 440\r\n */\r\nfunction midiToFreq(midi, tuning = 440) {\r\n    return Math.pow(2, (midi - 69) / 12) * tuning;\r\n}\r\nconst L2 = Math.log(2);\r\nconst L440 = Math.log(440);\r\n/**\r\n * Get the midi number from a frequency in hertz. The midi number can\r\n * contain decimals (with two digits precission)\r\n *\r\n * @param {number} frequency\r\n * @return {number}\r\n * @example\r\n * import { freqToMidi} from '@tonaljs/midi'\r\n * freqToMidi(220)); //=> 57\r\n * freqToMidi(261.62)); //=> 60\r\n * freqToMidi(261)); //=> 59.96\r\n */\r\nfunction freqToMidi(freq) {\r\n    const v = (12 * (Math.log(freq) - L440)) / L2 + 69;\r\n    return Math.round(v * 100) / 100;\r\n}\r\nconst SHARPS = \"C C# D D# E F F# G G# A A# B\".split(\" \");\r\nconst FLATS = \"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");\r\n/**\r\n * Given a midi number, returns a note name. The altered notes will have\r\n * flats unless explicitly set with the optional `useSharps` parameter.\r\n *\r\n * @function\r\n * @param {number} midi - the midi note number\r\n * @param {Object} options = default: `{ sharps: false, pitchClass: false }`\r\n * @param {boolean} useSharps - (Optional) set to true to use sharps instead of flats\r\n * @return {string} the note name\r\n * @example\r\n * import { midiToNoteName } from '@tonaljs/midi'\r\n * midiToNoteName(61) // => \"Db4\"\r\n * midiToNoteName(61, { pitchClass: true }) // => \"Db\"\r\n * midiToNoteName(61, { sharps: true }) // => \"C#4\"\r\n * midiToNoteName(61, { pitchClass: true, sharps: true }) // => \"C#\"\r\n * // it rounds to nearest note\r\n * midiToNoteName(61.7) // => \"D4\"\r\n */\r\nfunction midiToNoteName(midi, options = {}) {\r\n    midi = Math.round(midi);\r\n    const pcs = options.sharps === true ? SHARPS : FLATS;\r\n    const pc = pcs[midi % 12];\r\n    if (options.pitchClass) {\r\n        return pc;\r\n    }\r\n    const o = Math.floor(midi / 12) - 1;\r\n    return pc + o;\r\n}\n\nexport { freqToMidi, isMidi, midiToFreq, midiToNoteName, toMidi };\n//# sourceMappingURL=index.esnext.js.map\n","import { note, transpose, coordToNote } from '@tonaljs/tonal';\nexport { tokenizeNote as tokenize } from '@tonaljs/tonal';\nimport { midiToNoteName } from '@tonaljs/midi';\n\nconst toNoteName = (sameAccidentals) => (noteName) => {\r\n    const n = note(noteName);\r\n    if (n.empty) {\r\n        return \"\";\r\n    }\r\n    const sharps = sameAccidentals ? n.alt > 0 : n.alt < 0;\r\n    const pitchClass = n.midi === null;\r\n    return midiToNoteName(n.midi || n.chroma, { sharps, pitchClass });\r\n};\r\n/**\r\n * Simplify a note\r\n *\r\n * @function\r\n * @param {string} note - the note to be simplified\r\n * - sameAccType: default true. Use same kind of accidentals that source\r\n * @return {string} the simplfied note or '' if not valid note\r\n * @example\r\n * simplify(\"C##\") // => \"D\"\r\n * simplify(\"C###\") // => \"D#\"\r\n * simplify(\"C###\")\r\n * simplify(\"B#4\") // => \"C5\"\r\n */\r\nconst simplify = toNoteName(true);\r\n/**\r\n * Get enharmonic of a note\r\n *\r\n * @function\r\n * @param {string} note\r\n * @return {string} the enhramonic note or '' if not valid note\r\n * @example\r\n * Note.enharmonic(\"Db\") // => \"C#\"\r\n * Note.enhramonic(\"C\") // => \"C\"\r\n */\r\nconst enharmonic = toNoteName(false);\r\n/**\r\n * Transpose by an interval\r\n * @function\r\n * @param {string} interval\r\n * @return {function} a function that transposes by the given interval\r\n * @example\r\n * [\"C\", \"D\", \"E\"].map(transposeBy(\"5P\"));\r\n * // => [\"G\", \"A\", \"B\"]\r\n */\r\nconst transposeBy = (interval) => (note) => transpose(note, interval);\r\n/**\r\n * Transpose from a note\r\n * @function\r\n * @param {string} note\r\n * @return {function}  a function that transposes the the note by an interval\r\n * [\"1P\", \"3M\", \"5P\"].map(transposeFrom(\"C\"));\r\n * // => [\"C\", \"E\", \"G\"]\r\n */\r\nconst transposeFrom = (note) => (interval) => transpose(note, interval);\r\n/**\r\n * Transpose a note by a number of perfect fifths.\r\n *\r\n * @function\r\n * @param {string} note - the note name\r\n * @param {number} fifhts - the number of fifths\r\n * @return {string} the transposed note name\r\n *\r\n * @example\r\n * import { transposeFifths } from \"@tonaljs/note\"\r\n * transposeFifths(\"G4\", 1) // => \"D\"\r\n * [0, 1, 2, 3, 4].map(fifths => transposeFifths(\"C\", fifths)) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\r\n */\r\nfunction transposeFifths(noteName, fifths) {\r\n    const n = note(noteName);\r\n    if (n.empty) {\r\n        return \"\";\r\n    }\r\n    const [nFifths, nOcts] = n.coord;\r\n    const transposed = nOcts === undefined\r\n        ? coordToNote([nFifths + fifths])\r\n        : coordToNote([nFifths + fifths, nOcts]);\r\n    return transposed.name;\r\n}\n\nexport { enharmonic, simplify, transposeBy, transposeFifths, transposeFrom };\n//# sourceMappingURL=index.esnext.js.map\n","import { isPitch, altToAcc, isNamed, accToAlt, interval } from '@tonaljs/tonal';\n\nconst NoRomanNumeral = { empty: true, name: \"\", chordType: \"\" };\r\nconst cache = {};\r\n/**\r\n * Get properties of a roman numeral string\r\n *\r\n * @function\r\n * @param {string} - the roman numeral string (can have type, like: Imaj7)\r\n * @return {Object} - the roman numeral properties\r\n * @param {string} name - the roman numeral (tonic)\r\n * @param {string} type - the chord type\r\n * @param {string} num - the number (1 = I, 2 = II...)\r\n * @param {boolean} major - major or not\r\n *\r\n * @example\r\n * romanNumeral(\"VIIb5\") // => { name: \"VII\", type: \"b5\", num: 7, major: true }\r\n */\r\nfunction romanNumeral(src) {\r\n    return typeof src === \"string\"\r\n        ? cache[src] || (cache[src] = parse(src))\r\n        : typeof src === \"number\"\r\n            ? romanNumeral(NAMES[src] || \"\")\r\n            : isPitch(src)\r\n                ? fromPitch(src)\r\n                : isNamed(src)\r\n                    ? romanNumeral(src.name)\r\n                    : NoRomanNumeral;\r\n}\r\n/**\r\n * Get roman numeral names\r\n *\r\n * @function\r\n * @param {boolean} [isMajor=true]\r\n * @return {Array<String>}\r\n *\r\n * @example\r\n * names() // => [\"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\"]\r\n */\r\nfunction names(major = true) {\r\n    return (major ? NAMES : NAMES_MINOR).slice();\r\n}\r\nfunction fromPitch(pitch) {\r\n    return romanNumeral(altToAcc(pitch.alt) + NAMES[pitch.step]);\r\n}\r\nconst REGEX = /^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;\r\nfunction tokenize(str) {\r\n    return (REGEX.exec(str) || [\"\", \"\", \"\", \"\"]);\r\n}\r\nconst ROMANS = \"I II III IV V VI VII\";\r\nconst NAMES = ROMANS.split(\" \");\r\nconst NAMES_MINOR = ROMANS.toLowerCase().split(\" \");\r\nfunction parse(src) {\r\n    const [name, acc, roman, chordType] = tokenize(src);\r\n    if (!roman) {\r\n        return NoRomanNumeral;\r\n    }\r\n    const upperRoman = roman.toUpperCase();\r\n    const step = NAMES.indexOf(upperRoman);\r\n    const alt = accToAlt(acc);\r\n    const dir = 1;\r\n    return {\r\n        empty: false,\r\n        name,\r\n        roman,\r\n        interval: interval({ step, alt, dir }).name,\r\n        acc,\r\n        chordType,\r\n        alt,\r\n        step,\r\n        major: roman === upperRoman,\r\n        oct: 0,\r\n        dir\r\n    };\r\n}\n\nexport { names, romanNumeral, tokenize };\n//# sourceMappingURL=index.esnext.js.map\n","import { transposeFifths } from '@tonaljs/note';\nimport { romanNumeral } from '@tonaljs/roman-numeral';\nimport { transpose, altToAcc, accToAlt, note } from '@tonaljs/tonal';\n\nconst mapToScale = (scale) => (symbols, sep = \"\") => symbols.map((symbol, index) => symbol !== \"-\" ? scale[index] + sep + symbol : \"\");\r\nfunction keyScale(gradesLiteral, chordsLiteral, hfLiteral, chordScalesLiteral) {\r\n    return (tonic) => {\r\n        const grades = gradesLiteral.split(\" \");\r\n        const intervals = grades.map(gr => romanNumeral(gr).interval || \"\");\r\n        const scale = intervals.map(interval => transpose(tonic, interval));\r\n        const map = mapToScale(scale);\r\n        return {\r\n            tonic,\r\n            grades,\r\n            intervals,\r\n            scale,\r\n            chords: map(chordsLiteral.split(\" \")),\r\n            chordsHarmonicFunction: hfLiteral.split(\" \"),\r\n            chordScales: map(chordScalesLiteral.split(\",\"), \" \")\r\n        };\r\n    };\r\n}\r\nconst distInFifths = (from, to) => {\r\n    const f = note(from);\r\n    const t = note(to);\r\n    return f.empty || t.empty ? 0 : t.coord[0] - f.coord[0];\r\n};\r\nconst MajorScale = keyScale(\"I II III IV V VI VII\", \"maj7 m7 m7 maj7 7 m7 m7b5\", \"T SD T SD D T D\", \"major,dorian,phrygian,lydian,mixolydian,minor,locrian\");\r\nconst NaturalScale = keyScale(\"I II bIII IV V bVI bVII\", \"m7 m7b5 maj7 m7 m7 maj7 7\", \"T SD T SD D SD SD\", \"minor,locrian,major,dorian,phrygian,lydian,mixolydian\");\r\nconst HarmonicScale = keyScale(\"I II bIII IV V bVI VII\", \"mmaj7 m7b5 +maj7 m7 7 maj7 mo7\", \"T SD T SD D SD D\", \"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian\");\r\nconst MelodicScale = keyScale(\"I II bIII IV V VI VII\", \"m6 m7 +maj7 7 7 m7b5 m7b5\", \"T SD T SD D - -\", \"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered\");\r\n/**\r\n * Get a major key properties in a given tonic\r\n * @param tonic\r\n */\r\nfunction majorKey(tonic) {\r\n    const keyScale = MajorScale(tonic);\r\n    const alteration = distInFifths(\"C\", tonic);\r\n    const map = mapToScale(keyScale.scale);\r\n    return {\r\n        ...keyScale,\r\n        type: \"major\",\r\n        minorRelative: transpose(tonic, \"-3m\"),\r\n        alteration,\r\n        keySignature: altToAcc(alteration),\r\n        secondaryDominants: map(\"- VI7 VII7 I7 II7 III7 -\".split(\" \")),\r\n        secondaryDominantsMinorRelative: map(\"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\".split(\" \")),\r\n        substituteDominants: map(\"- bIII7 IV7 bV7 bVI7 bVII7 -\".split(\" \")),\r\n        substituteDominantsMinorRelative: map(\"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\".split(\" \"))\r\n    };\r\n}\r\n/**\r\n * Get minor key properties in a given tonic\r\n * @param tonic\r\n */\r\nfunction minorKey(tonic) {\r\n    const alteration = distInFifths(\"C\", tonic) - 3;\r\n    return {\r\n        type: \"minor\",\r\n        tonic,\r\n        relativeMajor: transpose(tonic, \"3m\"),\r\n        alteration,\r\n        keySignature: altToAcc(alteration),\r\n        natural: NaturalScale(tonic),\r\n        harmonic: HarmonicScale(tonic),\r\n        melodic: MelodicScale(tonic)\r\n    };\r\n}\r\n/**\r\n * Given a key signature, returns the tonic of the major key\r\n * @param sigature\r\n * @example\r\n * majorTonicFromKeySignature('###') // => 'A'\r\n */\r\nfunction majorTonicFromKeySignature(sig) {\r\n    if (typeof sig === \"number\") {\r\n        return transposeFifths(\"C\", sig);\r\n    }\r\n    else if (typeof sig === \"string\" && /^b+|#+$/.test(sig)) {\r\n        return transposeFifths(\"C\", accToAlt(sig));\r\n    }\r\n    return null;\r\n}\n\nexport { majorKey, majorTonicFromKeySignature, minorKey };\n//# sourceMappingURL=index.esnext.js.map\n","import { chromaToIntervals, EmptyPcset } from '@tonaljs/pcset';\n\nconst DATA = [\r\n    [0, 2773, 0, \"ionian\", \"\", \"Maj7\", \"major\"],\r\n    [1, 2902, 2, \"dorian\", \"m\", \"m7\"],\r\n    [2, 3418, 4, \"phrygian\", \"m\", \"m7\"],\r\n    [3, 2741, -1, \"lydian\", \"\", \"Maj7\"],\r\n    [4, 2774, 1, \"mixolydian\", \"\", \"7\"],\r\n    [5, 2906, 3, \"aeolian\", \"m\", \"m7\", \"minor\"],\r\n    [6, 3434, 5, \"locrian\", \"dim\", \"m7b5\"]\r\n];\n\nconst NoMode = {\r\n    ...EmptyPcset,\r\n    name: \"\",\r\n    alt: 0,\r\n    modeNum: NaN,\r\n    triad: \"\",\r\n    seventh: \"\",\r\n    aliases: []\r\n};\r\nconst all = DATA.map(toMode);\r\nconst index = {};\r\nall.forEach(mode => {\r\n    index[mode.name] = mode;\r\n    mode.aliases.forEach(alias => {\r\n        index[alias] = mode;\r\n    });\r\n});\r\n/**\r\n * Get a Mode by it's name\r\n *\r\n * @example\r\n * mode('dorian')\r\n * // =>\r\n * // {\r\n * //   intervals: [ '1P', '2M', '3m', '4P', '5P', '6M', '7m' ],\r\n * //   modeNum: 1,\r\n * //   chroma: '101101010110',\r\n * //   normalized: '101101010110',\r\n * //   name: 'dorian',\r\n * //   setNum: 2902,\r\n * //   alt: 2,\r\n * //   triad: 'm',\r\n * //   seventh: 'm7',\r\n * //   aliases: []\r\n * // }\r\n */\r\nfunction mode(name) {\r\n    return typeof name === \"string\"\r\n        ? index[name.toLowerCase()] || NoMode\r\n        : name && name.name\r\n            ? mode(name.name)\r\n            : NoMode;\r\n}\r\n/**\r\n * Get a list of all know modes\r\n */\r\nfunction entries() {\r\n    return all.slice();\r\n}\r\nfunction toMode(mode) {\r\n    const [modeNum, setNum, alt, name, triad, seventh, alias] = mode;\r\n    const aliases = alias ? [alias] : [];\r\n    const chroma = Number(setNum).toString(2);\r\n    const intervals = chromaToIntervals(chroma);\r\n    return {\r\n        empty: false,\r\n        intervals,\r\n        modeNum,\r\n        chroma,\r\n        normalized: chroma,\r\n        name,\r\n        setNum,\r\n        alt,\r\n        triad,\r\n        seventh,\r\n        aliases\r\n    };\r\n}\n\nexport { entries, mode };\n//# sourceMappingURL=index.esnext.js.map\n","import { tokenize } from '@tonaljs/chord';\nimport { romanNumeral } from '@tonaljs/roman-numeral';\nimport { transpose, interval, distance } from '@tonaljs/tonal';\n\n/**\r\n * Given a tonic and a chord list expressed with roman numeral notation\r\n * returns the progression expressed with leadsheet chords symbols notation\r\n * @example\r\n * fromRomanNumerals(\"C\", [\"I\", \"IIm7\", \"V7\"]);\r\n * // => [\"C\", \"Dm7\", \"G7\"]\r\n */\r\nfunction fromRomanNumerals(tonic, chords) {\r\n    const romanNumerals = chords.map(romanNumeral);\r\n    return romanNumerals.map(rn => transpose(tonic, interval(rn)) + rn.chordType);\r\n}\r\n/**\r\n * Given a tonic and a chord list with leadsheet symbols notation,\r\n * return the chord list with roman numeral notation\r\n * @example\r\n * toRomanNumerals(\"C\", [\"CMaj7\", \"Dm7\", \"G7\"]);\r\n * // => [\"IMaj7\", \"IIm7\", \"V7\"]\r\n */\r\nfunction toRomanNumerals(tonic, chords) {\r\n    return chords.map(chord => {\r\n        const [note, chordType] = tokenize(chord);\r\n        const intervalName = distance(tonic, note);\r\n        const roman = romanNumeral(interval(intervalName));\r\n        return roman.name + chordType;\r\n    });\r\n}\n\nexport { fromRomanNumerals, toRomanNumerals };\n//# sourceMappingURL=index.esnext.js.map\n","import { compact, range } from '@tonaljs/array';\nimport { toMidi, midiToNoteName } from '@tonaljs/midi';\n\n/**\r\n * Create a numeric range. You supply a list of notes or numbers and it will\r\n * be conected to create complex ranges.\r\n *\r\n * @param {Array} array - the list of notes or numbers used\r\n * @return {Array} an array of numbers or empty array if not vald parameters\r\n *\r\n * @example\r\n * numeric([\"C5\", \"C4\"]) // => [ 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60 ]\r\n * // it works midi notes\r\n * numeric([10, 5]) // => [ 10, 9, 8, 7, 6, 5 ]\r\n * // complex range\r\n * numeric([\"C4\", \"E4\", \"Bb3\"]) // => [60, 61, 62, 63, 64, 63, 62, 61, 60, 59, 58]\r\n */\r\nfunction numeric(notes) {\r\n    const midi = compact(notes.map(toMidi));\r\n    if (!notes.length || midi.length !== notes.length) {\r\n        // there is no valid notes\r\n        return [];\r\n    }\r\n    return midi.reduce((result, note) => {\r\n        const last = result[result.length - 1];\r\n        return result.concat(range(last, note).slice(1));\r\n    }, [midi[0]]);\r\n}\r\n/**\r\n * Create a range of chromatic notes. The altered notes will use flats.\r\n *\r\n * @function\r\n * @param {String|Array} list - the list of notes or midi note numbers\r\n * @return {Array} an array of note names\r\n *\r\n * @example\r\n * Range.chromatic(\"C2 E2 D2\") // => [\"C2\", \"Db2\", \"D2\", \"Eb2\", \"E2\", \"Eb2\", \"D2\"]\r\n * // with sharps\r\n * Range.chromatic(\"C2 C3\", true) // => [ \"C2\", \"C#2\", \"D2\", \"D#2\", \"E2\", \"F2\", \"F#2\", \"G2\", \"G#2\", \"A2\", \"A#2\", \"B2\", \"C3\" ]\r\n */\r\nfunction chromatic(notes, options) {\r\n    return numeric(notes).map(midi => midiToNoteName(midi, options));\r\n}\n\nexport { chromatic, numeric };\n//# sourceMappingURL=index.esnext.js.map\n","import { sortedUniqNoteNames, rotate } from '@tonaljs/array';\nimport { entries } from '@tonaljs/chord-dictionary';\nimport { isSubsetOf, isSupersetOf, modes } from '@tonaljs/pcset';\nimport { scaleType, entries as entries$1 } from '@tonaljs/scale-dictionary';\nimport { note, transpose } from '@tonaljs/tonal';\n\n/**\r\n * References:\r\n * - https://www.researchgate.net/publication/327567188_An_Algorithm_for_Spelling_the_Pitches_of_Any_Musical_Scale\r\n * @module scale\r\n */\r\nconst NoScale = {\r\n    empty: true,\r\n    name: \"\",\r\n    type: \"\",\r\n    tonic: null,\r\n    setNum: NaN,\r\n    chroma: \"\",\r\n    normalized: \"\",\r\n    aliases: [],\r\n    notes: [],\r\n    intervals: []\r\n};\r\n/**\r\n * Given a string with a scale name and (optionally) a tonic, split\r\n * that components.\r\n *\r\n * It retuns an array with the form [ name, tonic ] where tonic can be a\r\n * note name or null and name can be any arbitrary string\r\n * (this function doesn\"t check if that scale name exists)\r\n *\r\n * @function\r\n * @param {string} name - the scale name\r\n * @return {Array} an array [tonic, name]\r\n * @example\r\n * tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\r\n * tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\r\n * tokenize() // => [\"\", \"\"]\r\n */\r\nfunction tokenize(name) {\r\n    if (typeof name !== \"string\") {\r\n        return [\"\", \"\"];\r\n    }\r\n    const i = name.indexOf(\" \");\r\n    const tonic = note(name.substring(0, i));\r\n    if (tonic.empty) {\r\n        const n = note(name);\r\n        return n.empty ? [\"\", name] : [n.name, \"\"];\r\n    }\r\n    const type = name.substring(tonic.name.length + 1);\r\n    return [tonic.name, type.length ? type : \"\"];\r\n}\r\n/**\r\n * Get a Scale from a scale name.\r\n */\r\nfunction scale(src) {\r\n    const tokens = Array.isArray(src) ? src : tokenize(src);\r\n    const tonic = note(tokens[0]).name;\r\n    const st = scaleType(tokens[1]);\r\n    if (st.empty) {\r\n        return NoScale;\r\n    }\r\n    const type = st.name;\r\n    const notes = tonic\r\n        ? st.intervals.map(i => transpose(tonic, i))\r\n        : [];\r\n    const name = tonic ? tonic + \" \" + type : type;\r\n    return { ...st, name, type, tonic, notes };\r\n}\r\n/**\r\n * Get all chords that fits a given scale\r\n *\r\n * @function\r\n * @param {string} name - the scale name\r\n * @return {Array<string>} - the chord names\r\n *\r\n * @example\r\n * scaleChords(\"pentatonic\") // => [\"5\", \"64\", \"M\", \"M6\", \"Madd9\", \"Msus2\"]\r\n */\r\nfunction scaleChords(name) {\r\n    const s = scale(name);\r\n    const inScale = isSubsetOf(s.chroma);\r\n    return entries()\r\n        .filter(chord => inScale(chord.chroma))\r\n        .map(chord => chord.aliases[0]);\r\n}\r\n/**\r\n * Get all scales names that are a superset of the given one\r\n * (has the same notes and at least one more)\r\n *\r\n * @function\r\n * @param {string} name\r\n * @return {Array} a list of scale names\r\n * @example\r\n * extended(\"major\") // => [\"bebop\", \"bebop dominant\", \"bebop major\", \"chromatic\", \"ichikosucho\"]\r\n */\r\nfunction extended(name) {\r\n    const s = scale(name);\r\n    const isSuperset = isSupersetOf(s.chroma);\r\n    return entries$1()\r\n        .filter(scale => isSuperset(scale.chroma))\r\n        .map(scale => scale.name);\r\n}\r\n/**\r\n * Find all scales names that are a subset of the given one\r\n * (has less notes but all from the given scale)\r\n *\r\n * @function\r\n * @param {string} name\r\n * @return {Array} a list of scale names\r\n *\r\n * @example\r\n * reduced(\"major\") // => [\"ionian pentatonic\", \"major pentatonic\", \"ritusen\"]\r\n */\r\nfunction reduced(name) {\r\n    const isSubset = isSubsetOf(scale(name).chroma);\r\n    return entries$1()\r\n        .filter(scale => isSubset(scale.chroma))\r\n        .map(scale => scale.name);\r\n}\r\n/**\r\n * Given an array of notes, return the scale: a pitch class set starting from\r\n * the first note of the array\r\n *\r\n * @function\r\n * @param {string[]} notes\r\n * @return {string[]} pitch classes with same tonic\r\n * @example\r\n * scaleNotes(['C4', 'c3', 'C5', 'C4', 'c4']) // => [\"C\"]\r\n * scaleNotes(['D4', 'c#5', 'A5', 'F#6']) // => [\"D\", \"F#\", \"A\", \"C#\"]\r\n */\r\nfunction scaleNotes(notes) {\r\n    const pcset = notes.map(n => note(n).pc).filter(x => x);\r\n    const tonic = pcset[0];\r\n    const scale = sortedUniqNoteNames(pcset);\r\n    return rotate(scale.indexOf(tonic), scale);\r\n}\r\n/**\r\n * Find mode names of a scale\r\n *\r\n * @function\r\n * @param {string} name - scale name\r\n * @example\r\n * modeNames(\"C pentatonic\") // => [\r\n *   [\"C\", \"major pentatonic\"],\r\n *   [\"D\", \"egyptian\"],\r\n *   [\"E\", \"malkos raga\"],\r\n *   [\"G\", \"ritusen\"],\r\n *   [\"A\", \"minor pentatonic\"]\r\n * ]\r\n */\r\nfunction modeNames(name) {\r\n    const s = scale(name);\r\n    if (s.empty) {\r\n        return [];\r\n    }\r\n    const tonics = s.tonic ? s.notes : s.intervals;\r\n    return modes(s.chroma)\r\n        .map((chroma, i) => {\r\n        const modeName = scale(chroma).name;\r\n        return modeName ? [tonics[i], modeName] : [\"\", \"\"];\r\n    })\r\n        .filter(x => x[0]);\r\n}\n\nexport { extended, modeNames, reduced, scale, scaleChords, scaleNotes, tokenize };\n//# sourceMappingURL=index.esnext.js.map\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@tonaljs/abc-notation'), require('@tonaljs/array'), require('@tonaljs/chord'), require('@tonaljs/chord-dictionary'), require('@tonaljs/interval'), require('@tonaljs/key'), require('@tonaljs/midi'), require('@tonaljs/mode'), require('@tonaljs/note'), require('@tonaljs/pcset'), require('@tonaljs/progression'), require('@tonaljs/range'), require('@tonaljs/roman-numeral'), require('@tonaljs/scale'), require('@tonaljs/scale-dictionary'), require('@tonaljs/tonal')) :\n  typeof define === 'function' && define.amd ? define(['exports', '@tonaljs/abc-notation', '@tonaljs/array', '@tonaljs/chord', '@tonaljs/chord-dictionary', '@tonaljs/interval', '@tonaljs/key', '@tonaljs/midi', '@tonaljs/mode', '@tonaljs/note', '@tonaljs/pcset', '@tonaljs/progression', '@tonaljs/range', '@tonaljs/roman-numeral', '@tonaljs/scale', '@tonaljs/scale-dictionary', '@tonaljs/tonal'], factory) :\n  (global = global || self, factory(global.Modules = {}, global.abcNotation, global.array, global.chord, global.chordDictionary, global.interval, global.key, global.midi, global.mode, global.note, global.pcset, global.progression, global.range, global.romanNumeral, global.scale, global.scaleDictionary, global.tonal));\n}(this, (function (exports, abcNotation, array, chord, chordDictionary, interval, key, midi, mode, note, pcset, progression, range, romanNumeral, scale, scaleDictionary, tonal) { 'use strict';\n\n  exports.AbcNotation = abcNotation;\n  exports.Array = array;\n  exports.Chord = chord;\n  exports.ChordDictionary = chordDictionary;\n  exports.Interval = interval;\n  exports.Key = key;\n  exports.Midi = midi;\n  exports.Mode = mode;\n  exports.Note = note;\n  exports.PcSet = pcset;\n  exports.Progression = progression;\n  exports.Range = range;\n  exports.RomanNumeral = romanNumeral;\n  exports.Scale = scale;\n  exports.ScaleDictionary = scaleDictionary;\n  exports.Tonal = tonal;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=index.es5.js.map\n"],"names":["isNamed","src","name","isPitch","pitch","step","alt","FIFTHS","STEPS_TO_OCTS","map","fifths","Math","floor","encode","oct","dir","f","undefined","FIFTHS_TO_STEPS","decode","coord","o","i","unaltered","NoNote","empty","pc","acc","cache","fillStr","s","n","Array","join","altToAcc","accToAlt","length","note","noteName","tokens","tokenize","letter","octStr","charCodeAt","chroma","SEMI","height","midi","freq","pow","parse","props","charAt","stepToLetter","pitchName","REGEX","str","m","exec","toUpperCase","replace","coordToNote","noteCoord","NoInterval","REGEX$1","RegExp","tokenize$1","cache$1","interval","num","q","abs","t","type","simple","test","qToAlt","semitones","SIZES","parse$1","fillStr$1","altToQ","pitchName$1","coordToInterval","transpose","intervalName","note$1","interval$1","intervalCoord","distance","fromNote","toNote","from","to","fcoord","tcoord","character","times","abcToScientificNotation","a","scientificToAbcNotation","toLowerCase","transpose$1","range","b","ascR","descR","rotate","arr","len","slice","concat","compact","filter","sortedNoteNames","notes","sort","sortedUniqNoteNames","permutations","reduce","perm","e","pos","newPerm","splice","rnd","random","EmptyPcset","setNum","normalized","intervals","setNumToChroma","Number","toString","chromaToNumber","parseInt","isChroma","set","[object Object]","pcset","isArray","binary","listToChroma","isPcset","normalizedNum","split","_","chromaRotations","chromaToIntervals","chromaToPcset","IVLS","push","all","modes","normalize","r","isSubsetOf","isSupersetOf","isNoteIncludedInSet","includes","isIncluded","s1","s2","NoChordType","quality","aliases","chords","index","chordType","entries","add","fullName","has","indexOf","getQuality","chord","forEach","alias","addAlias","ivls","names","Object","keys","NoScaleType","scales","scaleType","scale","NoChord","tonic","NaN","NUM_TYPES","lt","tokenizeNote","st","isChordIncluded","chordName","isSuperset","entries$1","isSubset","IN","IQ","combine","fn","coordA","coordB","substract","d","c","isMidi","arg","toMidi","L2","log","L440","SHARPS","FLATS","midiToNoteName","options","round","sharps","pitchClass","v","tuning","toNoteName","sameAccidentals","simplify","enharmonic","transposeFifths","nFifths","nOcts","NoRomanNumeral","romanNumeral","roman","upperRoman","NAMES","major","ROMANS","NAMES_MINOR","mapToScale","symbols","sep","symbol","keyScale","gradesLiteral","chordsLiteral","hfLiteral","chordScalesLiteral","grades","gr","chordsHarmonicFunction","chordScales","distInFifths","MajorScale","NaturalScale","HarmonicScale","MelodicScale","alteration","minorRelative","keySignature","secondaryDominants","secondaryDominantsMinorRelative","substituteDominants","substituteDominantsMinorRelative","sig","relativeMajor","natural","harmonic","melodic","NoMode","modeNum","triad","seventh","mode","rn","numeric","result","last","NoScale","substring","tonics","modeName","x","inScale","exports","abcNotation","array","chordDictionary","key","progression","scaleDictionary","tonal","AbcNotation","Chord","ChordDictionary","Interval","Key","Midi","Mode","Note","PcSet","Progression","Range","RomanNumeral","Scale","ScaleDictionary","Tonal","defineProperty","value","factory","require$$0","require$$1","require$$2","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15"],"mappings":"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"}